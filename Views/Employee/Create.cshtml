@model CRUD_MVC.Models.Employee


@{
    ViewBag.Title = "Create";
}

<form id="form" action="/Employee/Create" method="post">
    <div class="form-group"> 
        <label for="name">Name</label>
        <input type="text" class="form-control" id="name">
    </div>
    <div class="form-group">
        <label for="email">Email</label>
        <input type="text" class="form-control" id="email">
    </div>
    <div class="form-group ">
        <label for="select">Select</label>
        <select class="form-control" id="select">
            @foreach (var i in ViewBag.MyList)
            {
                <option value="@i.Designation_Emp">@i.Designation_Emp</option>
            }
        </select>
     </div>        
     <input id="submit" type="submit" value="Create" class="btn btn-warning" />
</form>

    


    <script>   

        document.querySelector("#form").addEventListener('submit', async (e) => {

            e.preventDefault();
            var name = document.getElementById('name').value;
            const email = document.getElementById('email').value;
            let designation = document.getElementById('select').value;  

            var obj = {
                Name: name,
                Email: email,
                Designation: designation
            };
            console.log(obj);

            const rawResponse = await fetch('https://localhost:44372/Employee/Create', {
                method: 'POST',
                headers: {
                    'Accept': 'application/json',
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify(obj)
            });
            if (!rawResponse.ok) {
                console.log('Error occured');
                return;
            }
            window.location.replace('/');

            
        })


           
   
    </script>

    @section Scripts {
        @Scripts.Render("~/bundles/jqueryval")
    }
